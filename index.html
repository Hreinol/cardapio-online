<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardápio de Marmitas Saudáveis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Remove setas do input number */
        input[type='number']::-webkit-inner-spin-button,
        input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type='number'] {
            -moz-appearance: textfield;
        }
        .form-input:focus, .form-radio:focus {
            border-color: #22c55e; /* green-500 */
            box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.2);
            outline: none;
        }
        .form-radio {
            color: #22c55e;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Main Container -->
    <div class="container mx-auto max-w-2xl p-4 sm:p-6 pb-32">

        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-green-700">Cardápio Saudável</h1>
            <p class="text-gray-600 mt-2">Escolha os pratos, preencha seus dados e forma de pagamento para pedir.</p>
        </header>

        <!-- Pricing Info -->
        <div class="bg-white p-4 rounded-xl shadow-md mb-8 border border-green-200">
            <div class="flex justify-around items-center text-center">
                <div>
                    <p class="font-semibold text-lg text-gray-700">Valor Unitário</p>
                    <p class="text-2xl font-bold text-green-600">R$22,90</p>
                </div>
                <div class="border-l h-12 border-gray-200"></div>
                <div>
                    <p class="font-semibold text-lg text-gray-700">Combo (5+)</p>
                    <p class="text-2xl font-bold text-green-600">R$21,90</p>
                    <p class="text-xs text-gray-500">por unidade</p>
                </div>
            </div>
            <p class="text-center text-xs text-gray-500 mt-3">Cada marmita tem aprox. 320g, com ingredientes 100% naturais.</p>
        </div>

        <!-- Menu Sections -->
        <div id="menu-container" class="space-y-8">
            <!-- As seções do cardápio serão inseridas aqui pelo JavaScript -->
        </div>
        
        <!-- Customer Info Form -->
        <div id="customer-form" class="mt-10">
            <h2 class="text-2xl font-bold text-green-800 border-b-2 border-green-200 pb-2 mb-4">Seus Dados para Entrega</h2>
            <div class="space-y-4 bg-white p-6 rounded-lg shadow-sm border">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Nome Completo</label>
                    <input type="text" id="name" name="name" class="form-input w-full rounded-md border-gray-300 shadow-sm transition" placeholder="Digite seu nome">
                </div>
                <div>
                    <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Endereço</label>
                    <input type="text" id="address" name="address" class="form-input w-full rounded-md border-gray-300 shadow-sm transition" placeholder="Rua, Avenida, etc.">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="number" class="block text-sm font-medium text-gray-700 mb-1">Número</label>
                        <input type="text" id="number" name="number" class="form-input w-full rounded-md border-gray-300 shadow-sm transition" placeholder="Ex: 123">
                    </div>
                    <div>
                        <label for="complement" class="block text-sm font-medium text-gray-700 mb-1">Complemento</label>
                        <input type="text" id="complement" name="complement" class="form-input w-full rounded-md border-gray-300 shadow-sm transition" placeholder="Apto, bloco, etc.">
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Method Form -->
        <div id="payment-form" class="mt-10">
            <h2 class="text-2xl font-bold text-green-800 border-b-2 border-green-200 pb-2 mb-4">Forma de Pagamento</h2>
            <div class="space-y-4 bg-white p-6 rounded-lg shadow-sm border">
                <div class="space-y-3">
                    <label class="flex items-center">
                        <input type="radio" name="payment" value="Cartão de Crédito" class="form-radio h-4 w-4 transition">
                        <span class="ml-3 text-gray-700">Cartão de Crédito</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="payment" value="Cartão de Débito" class="form-radio h-4 w-4 transition">
                        <span class="ml-3 text-gray-700">Cartão de Débito</span>
                    </label>
                    <label class="flex items-center">
                        <input type="radio" name="payment" value="Dinheiro" class="form-radio h-4 w-4 transition">
                        <span class="ml-3 text-gray-700">Dinheiro</span>
                    </label>
                    <div id="change-option" class="hidden pl-7 mt-2">
                        <input type="text" id="change-for" class="form-input w-full rounded-md border-gray-300 shadow-sm transition" placeholder="Precisa de troco para quanto? (Opcional)">
                    </div>
                    <label class="flex items-center">
                        <input type="radio" name="payment" value="PIX" class="form-radio h-4 w-4 transition">
                        <span class="ml-3 text-gray-700">PIX</span>
                    </label>
                    <div id="pix-info" class="hidden pl-7 mt-2 text-sm p-3 bg-green-50 rounded-md border border-green-200">
                        <p class="font-semibold">Chave PIX (Celular):</p>
                        <p class="text-green-800">11999838162</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Floating Footer for Order Button -->
    <footer class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-sm border-t border-gray-200 p-4 shadow-lg-top">
        <div class="container mx-auto max-w-2xl flex justify-between items-center">
            <div class="text-left">
                <p class="font-semibold text-gray-700">Total:</p>
                <p id="total-price" class="text-2xl font-bold text-green-700">R$ 0,00</p>
                <p id="total-items" class="text-xs text-gray-500">0 itens no carrinho</p>
            </div>
            <button id="order-button" class="bg-green-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-green-700 transition-colors flex items-center gap-2 disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-whatsapp" viewBox="0 0 16 16">
                    <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/>
                </svg>
                Fazer Pedido
            </button>
        </footer>
    </div>

    <script>
        // --- DADOS DO CARDÁPIO ---
        const menuData = {
            "Pratos Principais": [
                { name: "Lasanha de Frango", desc: "Frango cremoso desfiado e muçarela." },
                { name: "Lasanha de Berinjela", desc: "Molho a bolonhesa." },
                { name: "Strogonoff de Frango", desc: "Arroz e batata sauté." },
                { name: "Picadinho Bovino", desc: "Arroz e feijão." },
                { name: "Filé de Sobrecoxa Assada", desc: "Arroz com legumes e legumes no vapor." },
                { name: "Carne de Panela", desc: "Purê de abóbora e mix legumes assados." },
                { name: "Carne Moída 1", desc: "Purê de mandioquinha/batata e legumes no vapor." },
                { name: "Carne Moída 2", desc: "Purê de abóbora e legumes no vapor." },
                { name: "Carne Moída 3", desc: "Arroz e legumes no vapor." },
                { name: "Filé de Frango Grelhado", desc: "Molho branco, queijo, arroz integral e legumes assados." },
                { name: "Galinhada Fit", desc: "Arroz integral e cubos de frango." },
                { name: "Rocambole de Carne Moída", desc: "Recheado com queijo e tomate seco, arroz e legumes no vapor." },
                { name: "Filé de Tilápia Grelhada", desc: "Arroz integral, brócolis e cenoura no vapor." },
                { name: "Abobrinha Recheada", desc: "Carne moída, queijo e arroz integral." }
            ],
            "Massas e Tortas": [
                { name: "Mini Panquecas de Frango", desc: "Molho ao sugo e queijo - Massa de couve, beterraba ou cenoura (sem glúten)." },
                { name: "Panqueca Tradicional", desc: "Ricota com espinafre c/ molho ao sugo." },
                { name: "Torta de Frango", desc: "Frango desfiado com molho e milho verde." },
                { name: "Nhoque de Batata 1", desc: "Recheado com queijo e tomate seco. Molho ao sugo (sem glúten)." },
                { name: "Nhoque de Batata 2", desc: "Recheado com queijo. Molho ao sugo (sem glúten)." },
                { name: "Nhoque de Batata 3", desc: "Recheado com provolone. Molho ao sugo (sem glúten)." },
                { name: "Macarrão à Bolonhesa", desc: "Macarrão ao molho bolonhesa." }
            ],
            "Caldos e Sopas": [
                { name: "Caldo de Abóbora", desc: "Alho poró e carne seca desfiada (caseira)." },
                { name: "Caldo de Legumes", desc: "Legumes frescos." },
                { name: "Caldo Verde", desc: "Batata, calabresa, bacon e couve verde." },
                { name: "Sopa de Legumes com Carne", desc: "Nutritiva e saborosa." }
            ]
        };

        const phoneNumber = "5511999838162";
        const priceUnit = 22.90;
        const priceCombo = 21.90;
        const comboMinItems = 5;

        // --- ELEMENTOS DO DOM ---
        const menuContainer = document.getElementById('menu-container');
        const totalPriceEl = document.getElementById('total-price');
        const totalItemsEl = document.getElementById('total-items');
        const orderButton = document.getElementById('order-button');
        const formName = document.getElementById('name');
        const formAddress = document.getElementById('address');
        const formNumber = document.getElementById('number');
        const formComplement = document.getElementById('complement');
        const paymentRadios = document.querySelectorAll('input[name="payment"]');
        const changeOptionDiv = document.getElementById('change-option');
        const changeInput = document.getElementById('change-for');
        const pixInfoDiv = document.getElementById('pix-info');

        // --- FUNÇÕES ---

        function renderMenu() {
            menuContainer.innerHTML = '';
            for (const category in menuData) {
                const categoryTitle = document.createElement('h2');
                categoryTitle.className = 'text-2xl font-bold text-green-800 border-b-2 border-green-200 pb-2 mb-4';
                categoryTitle.textContent = category;
                menuContainer.appendChild(categoryTitle);

                const itemsList = document.createElement('div');
                itemsList.className = 'grid grid-cols-1 gap-4';
                menuData[category].forEach(item => {
                    const itemEl = document.createElement('div');
                    itemEl.className = 'flex items-center justify-between bg-white p-4 rounded-lg shadow-sm border';
                    itemEl.innerHTML = `
                        <div class="flex-grow pr-4">
                            <p class="font-semibold text-gray-800">${item.name}</p>
                            <p class="text-sm text-gray-500">${item.desc}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button data-action="decrease" class="w-8 h-8 rounded-full bg-gray-200 text-gray-700 font-bold text-lg hover:bg-gray-300 transition">-</button>
                            <input type="number" class="quantity-input w-12 text-center font-bold bg-transparent" value="0" min="0" max="99" readonly data-name="${item.name}">
                            <button data-action="increase" class="w-8 h-8 rounded-full bg-gray-200 text-gray-700 font-bold text-lg hover:bg-gray-300 transition">+</button>
                        </div>
                    `;
                    itemsList.appendChild(itemEl);
                });
                menuContainer.appendChild(itemsList);
            }
        }

        function updateTotals() {
            const quantityInputs = document.querySelectorAll('.quantity-input');
            let totalCount = 0;
            quantityInputs.forEach(input => {
                totalCount += parseInt(input.value);
            });
            
            let total = 0;
            const pricePerItem = totalCount >= comboMinItems ? priceCombo : priceUnit;
            total = totalCount * pricePerItem;

            totalPriceEl.textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
            totalItemsEl.textContent = `${totalCount} item${totalCount !== 1 ? 's' : ''} no carrinho`;
            
            orderButton.disabled = totalCount === 0;
        }
        
        function handleQuantityChange(event) {
            const button = event.target.closest('button[data-action]');
            if (!button) return;

            const action = button.dataset.action;
            const input = button.parentElement.querySelector('.quantity-input');
            let currentValue = parseInt(input.value);

            if (action === 'increase' && currentValue < 99) {
                currentValue++;
            } else if (action === 'decrease' && currentValue > 0) {
                currentValue--;
            }
            
            input.value = currentValue;
            updateTotals();
        }

        function handlePaymentChange() {
            const selectedPayment = document.querySelector('input[name="payment"]:checked').value;
            
            if (selectedPayment === 'Dinheiro') {
                changeOptionDiv.classList.remove('hidden');
            } else {
                changeOptionDiv.classList.add('hidden');
            }

            if (selectedPayment === 'PIX') {
                pixInfoDiv.classList.remove('hidden');
            } else {
                pixInfoDiv.classList.add('hidden');
            }
        }

        function generateWhatsAppMessage() {
            // Validação dos campos
            if (!formName.value.trim() || !formAddress.value.trim() || !formNumber.value.trim()) {
                alert('Por favor, preencha seu Nome, Endereço e Número para continuar.');
                formName.focus();
                return;
            }
            
            const selectedPayment = document.querySelector('input[name="payment"]:checked');
            if (!selectedPayment) {
                alert('Por favor, selecione uma forma de pagamento.');
                return;
            }

            const quantityInputs = document.querySelectorAll('.quantity-input');
            let itemsList = "";
            let totalCount = 0;

            quantityInputs.forEach(input => {
                const quantity = parseInt(input.value);
                if (quantity > 0) {
                    const itemName = input.dataset.name;
                    itemsList += `- ${quantity}x ${itemName}\n`;
                    totalCount += quantity;
                }
            });

            if (totalCount === 0) return;

            const pricePerItem = totalCount >= comboMinItems ? priceCombo : priceUnit;
            const total = totalCount * pricePerItem;

            // Montagem da mensagem
            let message = "Olá, Sônia! Gostaria de fazer um novo pedido:\n\n";
            message += "========================\n";
            message += "*DADOS PARA ENTREGA:*\n";
            message += `*Nome:* ${formName.value.trim()}\n`;
            message += `*Endereço:* ${formAddress.value.trim()}, ${formNumber.value.trim()}\n`;
            if (formComplement.value.trim()) {
                message += `*Complemento:* ${formComplement.value.trim()}\n`;
            }
            message += "========================\n\n";
            
            message += "*MEU PEDIDO:*\n";
            message += itemsList;
            message += "\n";
            message += `*Total de Itens:* ${totalCount}\n`;
            message += `*Valor Total:* R$ ${total.toFixed(2).replace('.', ',')}`;
            if (totalCount >= comboMinItems) {
                message += ` (Valor com desconto do combo)\n`;
            }
            message += "\n========================\n\n";

            message += "*FORMA DE PAGAMENTO:*\n";
            let paymentMethod = selectedPayment.value;
            message += `${paymentMethod}\n`;
            if (paymentMethod === 'Dinheiro' && changeInput.value.trim()) {
                message += `(Troco para: ${changeInput.value.trim()})\n`;
            }
            if (paymentMethod === 'PIX') {
                message += `(Chave: 11999838162)\n`;
            }

            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // --- EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', () => {
            renderMenu();
            updateTotals();
            menuContainer.addEventListener('click', handleQuantityChange);
            orderButton.addEventListener('click', generateWhatsAppMessage);
            paymentRadios.forEach(radio => radio.addEventListener('change', handlePaymentChange));
        });
    </script>
</body>
</html>
